"use strict";$(".main-body .page-wrapper").find("#order-list-container, #vendor-order-list-container").length&&($("#daterange-btn").daterangepicker(daterangeConfig(startDate,endDate),cbRange),cbRange(startDate,endDate),$(document).on("click",".applyBtn, .ranges ul li:nth-child(1), .ranges ul li:nth-child(2), .ranges ul li:nth-child(3), .ranges ul li:nth-child(4), .ranges ul li:nth-child(5), .ranges ul li:nth-child(6), .ranges ul li:nth-child(7)",(function(e){e.preventDefault();var t={startFrom:$("#startfrom").val()},i={endto:$("#endto").val()};let n=$("#start_date"),r=$("#end_date");n.empty(),r.empty(),$.each(t,(function(e,t){n.append($("<option></option>").attr("value",t).text(e))})),$.each(i,(function(e,t){r.append($("<option></option>").attr("value",t).text(e))})),$("#start_date option:first").attr("selected","selected"),$("#end_date option:first").attr("selected","selected"),$("#start_date").trigger("change")}))),$(".main-body .page-wrapper").find("#order-list-container").length&&$(document).on("click","#csv, #pdf",(function(e){e.preventDefault(),window.location=ADMIN_URL+"/orders/"+this.id})),$(".main-body .page-wrapper").find("#vendor-order-list-container").length&&$(document).on("click","#csv, #pdf",(function(e){e.preventDefault(),window.location=ADMIN_URL+"/orders/"+this.id}));const unblockEverything=()=>{$(".blockUI").each((function(){$(this).parent().unblock()}))},blockElement=(e,t={})=>{let i=Object.assign({},{message:'<div class="spinner-border text-warning" role="status"><span class="sr-only">Loading...</span></div>',css:{backgroundColor:"transparent",border:"none"}},t);e.block(i)},finished=()=>{unblockEverything(),$("#update-order").text(jsLang("Update")),orderUpdate=0},triggerNotification=e=>{$(".notification-msg-bar").find(".notification-msg").html(e),$(".notification-msg-bar").removeClass("smoothly-hide"),setTimeout((()=>{$(".notification-msg-bar").addClass("smoothly-hide"),$(".notification-msg-bar").find(".notification-msg").html("")}),1500)};function addClassDelivery(){$(".status").each((function(){$(this).hasClass("delivery")||($(this).addClass("delivery"),$(this).prop("disabled",!0))}))}function checkAllStatus(){$(".status").each((function(){if(!$(this).hasClass("delivery"))return!1})),$("#status").val(finalOrderStatus),$("#status").prop("disabled",!0)}function assignOldStatus(){$(".status").each((function(){oldDetailStatus[$(this).attr("data-id")]=$(this).val()}))}$(document).on("change",".status.order-status",(function(){changeStatus[$(this).attr("data-id")]=$(this).val()}));var oldDetailStatus={},changeStatus={};if(assignOldStatus(),$(".main-body .page-wrapper").find("#invoice-view-container").length){$("#updateNote").on("click",(function(){blockElement($(this).closest(".order-notes-container")),$.ajax({url:orderUrl,type:"POST",data:{_token:token,data:{order_id:orderId,note:$("#order_note").val(),type:"note"}},success:function(e){1==e.status?(triggerNotification(e.message),$(".order-notes-container .notes").prepend(`\n                        <div class="order-notes mb-2">\n                            <span>${e.note}</span>\n                        </div>\n                        <div class="date-delete-container">\n                            <span class="date">${e.date}</span>\n                        </div>\n                    `),$("#order_note").val("")):triggerNotification(e.error)},error:function(){triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(e){unblockEverything()}})}));var deliveryDate=null;$("#deliveryDate").on("change",(function(){deliveryDate=$(this).val()}));var oldOrderStatusId=$("#status").val();function e(){let e=$("#status").val();if("Unpaid"==$("#payment_status").val()&&e==finalOrderStatus)return $(`#status option[value="${oldOrderStatusId}"]`).prop("selected",!0),$("#status").siblings(".select2-container").find(".select2-selection__rendered").text($(`#status option[value="${oldOrderStatusId}"]`).text()),triggerNotification(jsLang("Payment status is unpaid.")),finished(),!1;$.ajax({url:ADMIN_URL+"/orders/change-status",type:"POST",data:{_token:token,data:{status_id:$("#status").val(),order_id:orderId}},success:function(t){1==t.status?(triggerNotification(t.message),oldOrderStatusId=e,$(".status").each((function(){$(this).hasClass("delivery")||null!=changeStatus[$(this).attr("data-id")]&&$("#status").val()!=finalOrderStatus||$(this).val(e)}))):triggerNotification(t.error),finalOrderStatus==e&&($(this).prop("disabled",!0),addClassDelivery(),checkAllStatus())},error:function(){triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(){t(),finished(),window.location=currentUrl}})}function t(){if("Unpaid"==$("#payment_status").val())for(const e in changeStatus)changeStatus[e]==finalOrderStatus&&($(`.status[data-id=${e}]`).find(`option[value=${oldDetailStatus[e]}]`).prop("selected",!0),delete changeStatus[e]);Object.keys(changeStatus).length>0&&$.ajax({url:ADMIN_URL+"/orders/change-status",type:"POST",data:{_token:token,data:{status_ids:changeStatus,order_id:orderId,type:"detail"}},success:function(){$(".status").each((function(){$(this).hasClass("delivery")||finalOrderStatus!=$(this).val()||($(this).addClass("delivery"),$(this).prop("disabled",!0))}))},complete:function(){assignOldStatus(),changeStatus={},window.location=currentUrl}})}function i(){if(null==deliveryDate)return!1;blockElement($(".order-delivery-sections-body")),$.ajax({url:orderUrl,type:"POST",data:{_token:token,data:{order_id:orderId,deliveryDate:deliveryDate,type:"deliveryDate"}},complete:function(){unblockEverything(),deliveryDate=null}})}var orderUpdate=0;$(document).on("click","#update-order",(function(n){if(++orderUpdate>1)return!1;$(this).text(jsLang("Updating")).append('<div class="spinner-border spinner-border-sm ml-2" role="status">'),blockElement($(".order-details-body")),blockElement($(".order-info-table-container")),blockElement($(".download-permission-container")),i();let r=$("#payment_status").val();const a=[];$(".download_data").each((function(e,t){a[e]=$(":input",this).map((function(){return{[$(this).attr("name")]:$(this).val()}})).get()}));let o="";if(!$("#billing_address_edit_section").hasClass("display_none")&&(o=$("#billing_address_edit_section").find("input,select").serialize(),!checkBillingAddress()))return $("#update-order").text(jsLang("Update")),$("#update-order").next().remove(),orderUpdate=0,!1;let s="";if(!$("#shipping_address_edit_section").hasClass("display_none")&&(s=$("#shipping_address_edit_section").find("input,select").serialize(),!checkShippingAddress()))return $("#update-order").text(jsLang("Update")),$("#update-order").next().remove(),orderUpdate=0,!1;$.ajax({url:orderUrl,type:"POST",data:{_token:token,data:{order_id:orderId,payment_status:r,user_id:$("#user_id").val(),order_date:$("#order_date").val(),download_data:JSON.stringify(a),billing_data:o,shipping_data:s,type:"general"}},success:function(e){oldOrderStatusId==$("#status").val()&&(1==e.status?triggerNotification(e.message):triggerNotification(e.error))},error:function(){triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(){oldOrderStatusId==$("#status").val()?(t(),finished()):e(),window.location=currentUrl}})}));var orderActionCount=0;$(document).on("click","#order_action_btn",(function(e){let t=$("#orderAction").val();if(!t||++orderActionCount>1)return!1;$(this).html('<div class="order-action-loader spinner-border spinner-border-sm">');let i={order_id:orderId,action_val:t,type:"orderAction"};$.ajax({type:"POST",url:orderUrl,data:{_token:token,data:i},success:function(e){1==e.status?triggerNotification(e.message):(e.error,triggerNotification(e.error))},complete:function(){$("#order_action_btn").html('<i class="feather icon-chevron-right fa-2x"></i>'),orderActionCount=0}})})),$(".select-user").select2({ajax:{url:ADMIN_URL+"/find-users-with-ajax",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return{results:e.data}},cache:!0},placeholder:jsLang("Search for users by name."),minimumInputLength:3})}if(($(".main-body .page-wrapper").find("#invoice-view-container").length||$(".main-body .page-wrapper").find("#vendor-order-view-container").length)&&($(document).on("click",".download_copy_link",(function(e){var t=$(this).attr("data-link");navigator.clipboard.writeText(t),triggerNotification(jsLang("link copied"))})),$(document).on("click",".revoke_access",(function(e){let t=$(this).attr("data-id"),i=$(this),n=$(this).text();$(this).text(jsLang("Updating")).append('<div class="spinner-border spinner-border-sm ml-2" role="status">'),blockElement($(".download-permission-container")),$.ajax({url:orderUrl,type:"POST",data:{_token:token,data:{order_id:orderId,file_id:t,type:"download"}},success:function(e){1==e.status?triggerNotification(e.message):triggerNotification(e.error)},error:function(){triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(){$("#downloadData-"+t).remove(),unblockEverything(),i.text(n)}})})),$("#search_products").select2({ajax:{url:ADMIN_URL+"/find-downloadable-products-with-ajax",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return{results:e.data}},cache:!0},placeholder:jsLang("Search for a downloadable product"),minimumInputLength:3}),$(document).on("click","#grant_access",(function(e){let t=$(this).text(),i=$(this);$(this).text(jsLang("Updating")).append('<div class="spinner-border spinner-border-sm ml-2" role="status">'),blockElement($(".download-permission-container")),$.ajax({url:ADMIN_URL+"/grant-access-with-ajax",type:"POST",data:{_token:token,product_ids:$('select[name="grant_access[]"]').map((function(){return $(this).val()})).get(),order_id:orderId},dataType:"json",success:function(e){if(1==e.status){let t="";$.each(e.data,(function(e,i){(1==parseInt(i.is_accessible)&&"undefined"!=typeof vendorId&&vendorId==i.vendor_id||1==parseInt(i.is_accessible)&&"admin"==orderView)&&(t+=`\n                                <div class="col-sm-12 download_data" id="downloadData-${i.id}">\n                                    <div class="row px-3">\n                                        <div class="col-md-2 mt-2 mt-md-0">\n                                            <span>${jsLang("Download limit")}</span>\n                                            <div class="d-flex">\n                                                <input type="hidden" name="id" value="${i.id}">\n                                                <input value="${i.download_limit}" name="download_limit" class="form-control inputFieldDesign" type="text">\n                                            </div>\n                                        </div>\n                                        <div class="col-md-2 mt-2 mt-md-0">\n                                            <span>${jsLang("Download expiry")}</span>\n                                            <div class="d-flex">\n                                              <input value="${i.download_expiry}" name="download_expiry" class="form-control inputFieldDesign" type="text">\n                                            </div>\n                                        </div>\n                                        <div class="col-md-3">\n                                            <span>${jsLang("Customer download link")}</span>\n                                            <div class="d-flex">\n                                              <a href="javascript:void(0)" class="download_copy_link btn-default p-1" data-link = "${i.link}">${jsLang("Copy Link")}</a>\n                                            </div>\n                                        </div>\n                                        <input type="hidden" name="link" value="${i.link}">\n                                        <input type="hidden" name="download_times" value="${i.download_times}">\n                                        <input type="hidden" name="is_accessible" value="${i.is_accessible}">\n                                        <input type="hidden" name="vendor_id" value="${i.vendor_id}">\n                                        <input type="hidden" name="name" value="${i.name}">\n                                        <input type="hidden" name="f_name" value="${i.f_name}">\n                                        <div class="col-md-3 mt-2 mt-md-0">\n                                            <span>${jsLang("Access")}</span>\n                                            <div class="d-flex">\n                                                <a href="javascript:void(0)" class="revoke_access btn-default p-2" data-id="${i.id}">${jsLang("Revoke access")}</a>\n                                            </div>\n                                        </div>\n                                        <div class="col-md-2 mt-2 mt-md-0">\n                                            <span>${jsLang("Downloaded")}</span>\n                                            <div class="d-flex">\n                                                ${i.download_times+" "+jsLang("Times")}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                `)})),$("#download_div").html(t)}},error:function(){triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(){unblockEverything(),i.text(t),$("#search_products").empty()}})}))),$(".main-body .page-wrapper").find("#vendor-order-view-container").length){$("#updateNote").on("click",(function(){blockElement($(this).closest(".order-notes-container")),$.ajax({url:ADMIN_URL+"/store-note",type:"POST",data:{_token:token,data:{order_id:orderId,note:$("#order_note").val()}},success:function(e){1==e.status?(triggerNotification(e.message),$(".order-notes-container .notes").prepend(`\n                        <div class="order-notes mb-2">\n                            <span>${e.note}</span>\n                        </div>\n                        <div class="date-delete-container">\n                            <span class="date">${e.date}</span>\n                        </div>\n                    `),$("#order_note").val("")):triggerNotification(e.error)},error:function(){triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(e){unblockEverything()}})}));orderActionCount=0;$(document).on("click","#order_action_btn",(function(e){let t=$("#orderAction").val();if(!t||++orderActionCount>1)return!1;$(this).html('<div class="order-action-loader spinner-border spinner-border-sm">');let i={order_id:orderId,action_val:t,type:"orderAction"};$.ajax({type:"POST",url:ADMIN_URL+"/order/actions",data:{_token:token,data:i},success:function(e){1==e.status?triggerNotification(e.message):(e.error,triggerNotification(e.error))},complete:function(){$("#order_action_btn").html('<i class="feather icon-chevron-right fa-2x"></i>'),orderActionCount=0}})}));orderUpdate=0;$("#update-order").on("click",(function(){if(++orderUpdate>1)return!1;const e=[];$(".download_data").each((function(t,i){e[t]=$(":input",this).map((function(){return{[$(this).attr("name")]:$(this).val()}})).get()}));let t="";if(!$("#billing_address_edit_section").hasClass("display_none")&&(t=$("#billing_address_edit_section").find("input,select").serialize(),!checkBillingAddress()))return $("#update-order").text(jsLang("Update")),$("#update-order").next().remove(),orderUpdate=0,!1;let i="";if(!$("#shipping_address_edit_section").hasClass("display_none")&&(i=$("#shipping_address_edit_section").find("input,select").serialize(),!checkShippingAddress()))return $("#update-order").text(jsLang("Update")),$("#update-order").next().remove(),orderUpdate=0,!1;$(this).text(jsLang("Updating")).append('<div class="spinner-border spinner-border-sm ml-2" role="status">'),blockElement($(".order-info-table-container")),blockElement($(".download-permission-container"));var n=0;if("Unpaid"==paymentStatus)for(const e in changeStatus)changeStatus[e]==finalOrderStatus&&($(`.status[data-id=${e}]`).find(`option[value=${oldDetailStatus[e]}]`).prop("selected",!0),delete changeStatus[e],++n);if(n>0)return triggerNotification(jsLang("Please pay first in order to reach the final status.")),finished(),!1;$.ajax({url:ADMIN_URL+"/orders/change-status",type:"POST",data:{_token:token,data:{status_ids:changeStatus,id:orderId,type:"detail",download_data:JSON.stringify(e),billing_data:t,shipping_data:i}},success:function(e){$(".status").each((function(){$(this).hasClass("delivery")||finalOrderStatus!=$(this).val()||($(this).addClass("delivery"),$(this).prop("disabled",!0))})),triggerNotification(e.message)},complete:function(){assignOldStatus(),changeStatus={},finished(),window.location=currentUrl}})}))}function checkBillingAddress(){let e=!0;$.each($(".has_require"),(function(){$(this).val()?($(this).removeClass("error_tag"),$(this).parent().find(".error_msg").remove()):($(this).hasClass("error_tag")||($(this).addClass("error_tag"),$(this).parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e=!1)}));let t=!0;return 2==$(".checked_require").length&&(1==!$("#radio-w-infill-1").prop("checked")&&1==!$("#radio-w-infill-2").prop("checked")&&(t=!1),1==e&&(e=t),$("#radio-w-infill-1").parent().find(".error_msg").length||1!=!$("#radio-w-infill-1").prop("checked")||1!=!$("#radio-w-infill-2").prop("checked")?1!=$("#radio-w-infill-1").prop("checked")&&1!=$("#radio-w-infill-2").prop("checked")||$("#radio-w-infill-1").parent().find(".error_msg").remove():$("#radio-w-infill-1").parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e}function checkShippingAddress(){let e=!0;$.each($(".shipping_has_require"),(function(){$(this).val()?($(this).removeClass("error_tag"),$(this).parent().find(".error_msg").remove()):($(this).hasClass("error_tag")||($(this).addClass("error_tag"),$(this).parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e=!1)}));let t=!0;return 2==$(".shipping_checked_require").length&&(1==!$("#shipping_radio-w-infill-1").prop("checked")&&1==!$("#shipping_radio-w-infill-2").prop("checked")&&(t=!1),1==e&&(e=t),$("#shipping_radio-w-infill-1").parent().find(".error_msg").length||1!=!$("#shipping_radio-w-infill-1").prop("checked")||1!=!$("#shipping_radio-w-infill-2").prop("checked")?1!=$("#shipping_radio-w-infill-1").prop("checked")&&1!=$("#shipping_radio-w-infill-2").prop("checked")||$("#shipping_radio-w-infill-1").parent().find(".error_msg").remove():$("#shipping_radio-w-infill-1").parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e}function checkBillingAddress(){let e=!0;$.each($(".has_require"),(function(){$(this).val()?($(this).removeClass("error_tag"),$(this).parent().find(".error_msg").remove()):($(this).hasClass("error_tag")||($(this).addClass("error_tag"),$(this).parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e=!1)}));let t=!0;return 2==$(".checked_require").length&&(1==!$("#radio-w-infill-1").prop("checked")&&1==!$("#radio-w-infill-2").prop("checked")&&(t=!1),1==e&&(e=t),$("#radio-w-infill-1").parent().find(".error_msg").length||1!=!$("#radio-w-infill-1").prop("checked")||1!=!$("#radio-w-infill-2").prop("checked")?1!=$("#radio-w-infill-1").prop("checked")&&1!=$("#radio-w-infill-2").prop("checked")||$("#radio-w-infill-1").parent().find(".error_msg").remove():$("#radio-w-infill-1").parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e}function checkShippingAddress(){let e=!0;$.each($(".shipping_has_require"),(function(){$(this).val()?($(this).removeClass("error_tag"),$(this).parent().find(".error_msg").remove()):($(this).hasClass("error_tag")||($(this).addClass("error_tag"),$(this).parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e=!1)}));let t=!0;return 2==$(".shipping_checked_require").length&&(1==!$("#shipping_radio-w-infill-1").prop("checked")&&1==!$("#shipping_radio-w-infill-2").prop("checked")&&(t=!1),1==e&&(e=t),$("#shipping_radio-w-infill-1").parent().find(".error_msg").length||1!=!$("#shipping_radio-w-infill-1").prop("checked")||1!=!$("#shipping_radio-w-infill-2").prop("checked")?1!=$("#shipping_radio-w-infill-1").prop("checked")&&1!=$("#shipping_radio-w-infill-2").prop("checked")||$("#shipping_radio-w-infill-1").parent().find(".error_msg").remove():$("#shipping_radio-w-infill-1").parent().append(`<label id="title-error" class="error error_msg" for="title" style="">${jsLang("This field is required.")}</label>`)),e}function copyURL(){var e=$(this).attr("data-route");navigator.clipboard.writeText(e),triggerNotification(jsLang("link copied"))}$(".select-provider").select2({ajax:{url:GLOBAL_URL+"/find-shipping-providers",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){e.unshift({id:"0",name:"Custom Provider",image:customProviderImage});var i=$(".select-provider").find("option").eq(1);return i.length&&e.push({id:i.val(),name:i.text(),image:i.attr("data-image")}),{results:e}},cache:!0},placeholder:jsLang("Search for provider by name."),allowClear:!0,minimumInputLength:1,language:{inputTooShort:function(e){return jsLang("Start typing to search...")},noResults:function(){return jsLang("No results found")},searching:function(){return jsLang("Searching...")}},templateSelection:function(e){return e.id?(e.text&&(e.name=e.text,e.image=e.image||$(".select-provider").find("option:first").attr("data-image")),$("<div><img class='rounded'  src='"+e.image+"' width='25' height='25'/><span class='ms-2 fw-bold'> "+e.name+"</span></div>")):jsLang("Start typing to search...")},templateResult:function(e){if(e.id&&e.image)return $(`<div class="d-flex align-items-center">\n                <div>\n                    <img class="rounded" width="25" height="25" src="${e.image}">\n                </div>\n                <div class="ms-3">\n                    <div><strong>${e.name}</strong></div>\n                </div>\n            </div>`)}}),$(document).on("click",".shipping-track-info",(function(){$("#track-shipping").find('input:not([type="hidden"])').each((function(){$(this).val("")})),$("#track-shipping").find("select").val(null).trigger("change"),unblockEverything();var e=$(this).data("shipping_provider_id"),t=$(this).data("shipping_provider_logo"),i=$(this).data("provider_name"),n=$(this).data("order_id"),r=$(this).data("product_id"),a=$(this).data("tracking_link"),o=$(this).data("tracking_no"),s=$(this).data("order_shipped_date");const d=$("#shipping_provider_id");d.empty();const l=$("<option>",{value:e,"data-image":t,text:i});d.append(l),d.val(e),d.trigger("change"),$("#track-shipping").find("#provider_name").val(i),$("#track-shipping").find("#tracking_number").val(o),$("#track-shipping").find("#tracking_link").val(a),$("#track-shipping").find("#order_shipped_date").val(s),$("#track-shipping").find("#order_id").val(n),$("#track-shipping").find("#product_id").val(r),$("#track-shipping").modal("show")})),$("#generate_track_link").on("click",(function(){blockElement($(this).closest(".order-shipment-tracking-container"));let e=$("#tracking_base_url").val(),t=$("#tracking_number").val();""==e&&triggerNotification(jsLang("Tracking link field is required")),e.includes("%number%")?e=e.replace("%number%",t):t&&(e+=t),$("#tracking_link").val(e),$("#preview_link").attr("href",e),unblockEverything()})),$("#updateOrderTrack").on("click",(function(){var e=$(this);$(this).text(jsLang("Updating")).append('<div class="spinner-border spinner-border-sm ml-2">'),blockElement($(this).closest(".order-shipment-tracking-container")),$.ajax({url:orderUrl,type:"POST",data:{_token:token,data:{order_id:orderId,product_id:$("#product_id").val(),shipping_provider_id:$("#shipping_provider_id").val(),provider_name:$("#provider_name").val(),tracking_no:$("#tracking_number").val(),tracking_link:$("#tracking_link").val(),order_shipped_date:$("#order_shipped_date").val(),track_type:$("#track_type").val(),type:"shipmentTracking"}},success:function(t){1==t.status?(triggerNotification(t.message),window.location.reload()):(e.text(jsLang("Save Tracking")).append('<div class="spinner-border spinner-border-sm ml-2">'),triggerNotification(t.error))},error:function(){e.text(jsLang("Save Tracking")).append('<div class="spinner-border spinner-border-sm ml-2">'),triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(e){unblockEverything()}})})),$(document).ready((function(){$("#shipping_provider_id").on("change",(function(){blockElement($(this).closest(".order-shipment-tracking-container")),$("#tracking_link").val(""),$("#tracking_number").val(""),$("#tracking_base_url").val(""),$("#order_shipped_date").val("");let e=$("#shipping_provider_id").val();if(0==e&&""!=e)return $("#custom_provider_name").removeClass("d-none"),$("#generate_track_link").addClass("d-none"),$("#provider_name").val(""),void unblockEverything();$("#provider_name").val($("#shipping_provider_id option:selected").text()),$("#generate_track_link").removeClass("d-none"),unblockEverything(),$("#custom_provider_name").addClass("d-none"),e&&$.ajax({url:GLOBAL_URL+"/shipping/provider/"+e,type:"GET",success:function(e){1==e.status?($("#provider_name").val(e.content.name),$("#tracking_link").val(e.content.tracking_base_url),$("#tracking_base_url").val(e.content.tracking_base_url),"Post"==e.track_method?$("#generate_track_link").addClass("d-none"):$("#generate_track_link").trigger("click")):triggerNotification(e.error)},error:function(){triggerNotification(jsLang("Something went wrong, please try again."))},complete:function(e){unblockEverything()}})}))})),$("#order_shipped_date").daterangepicker({singleDatePicker:!0,showDropdowns:!0,autoUpdateInput:!1,minDate:moment().startOf("day"),drops:"up",locale:{format:"YYYY-MM-DD"}}),$("#order_shipped_date").on("apply.daterangepicker",(function(e,t){$(this).val(t.startDate.format("YYYY-MM-DD"))})),$(document).on("click","#payment-link",copyURL);
